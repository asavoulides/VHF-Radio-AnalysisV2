# ProScan Radio Transcription Processor

This project provides a high-performance, real-time transcription pipeline for audio files generated by ProScan, a scanner radio recording application. It automatically detects new `.mp3` recordings, ensures they are fully written, and then transcribes them using the Deepgram API. Each transcription is stored alongside relevant metadata including the system, department, channel, and timestamp.

---

## Project Goals

- Automatically detect and process new ProScan audio files
- Transcribe police, fire, and EMS radio traffic accurately using boosted key terms
- Organize and store transcription metadata for later use (e.g., web interface, alert system)
- Enable efficient and scalable real-time audio handling

---

## Folder Structure

```
/Proscan/Recordings/
├── MM-DD-YY/
│   ├── System; Department; Channel - Timestamp.mp3
│   └── ...
```

Recordings are organized by date. Each audio file is named in a structured format with metadata encoded directly in the filename.

---

## Components

### app.py

Main runtime script that:

- Loads all `.mp3` files for today’s date
- Skips any that are already transcribed
- Waits for the last file to finish writing
- Transcribes each file concurrently
- Monitors the ProScan directory for new files in real-time

### api.py

Handles transcription via Deepgram:

- Loads API credentials from `.env`
- Applies a keyterm-boosted model (`nova-3`)
- Extracts and returns clean transcript text
- (Optional) Includes `LLM_REQ()` for further processing via OpenAI

### utils.py

Includes utility functions:

- `wait_until_file_complete()`: Ensures file is not locked before processing
- `get_system()`, `get_department()`, `get_channel()`: Extracts metadata from filenames
- `get_most_recent_file()`, `wait_for_new_file()`: File monitoring utilities

### data.py

Handles metadata storage:

- Maintains a daily `.json` file under `Logs/`
- Saves transcript results per filename
- Prevents reprocessing of already-handled files
- Provides access to all historical metadata for the day

---

## Example Output Format

Output is written to a daily JSON log file in `Logs/`. Each entry contains:

```json
{
  "System; Department; Channel - Timestamp.mp3": {
    "Time": "01:06:30",
    "Transcript": "Unit 3 responding to a structure fire.",
    "System": "State Police",
    "Department": "Troop H",
    "Channel": "Boston",
    "Filepath": "C:/Proscan/Recordings/07-01-25/System; Department; Channel - Timestamp.mp3"
  }
}
```

---

## Setup

1. Install Python 3.9+  
2. Create a `.env` file containing your Deepgram API key:

```
DEEPGRAM_API_KEY=your_key_here
```

3. Ensure `C:/Proscan/Recordings` is where your ProScan software is saving files  
4. Run `app.py` to begin processing

---

## Requirements

- Python 3.9+
- `deepgram-sdk`
- `openai`
- `python-dotenv`

Dependencies should be added to a `requirements.txt` file for installation.

---

## Contact

**Alexander Savoulides**  
Newton, Massachusetts  
alexandersavoulides@gmail.com

---

## License

This project is licensed under the MIT License.
